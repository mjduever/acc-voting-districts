<!DOCTYPE html>
<html lang='en'>

<head>
  <title>ACC Voting Districts</title>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
  <link href='https://api.mapbox.com/mapbox-assembly/v0.17.0/assembly.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-geocoder-mapzen/1.9.4/leaflet-geocoder-mapzen.css">

  <style>

  </style>

</head>

<body>
  <div class='grid'>
    <div class='col col--12 col--3-ml px12 viewport-third viewport-full-ml'>
      <div class='h-full scroll-auto relative'>
        <h1 class='txt-h2 mb6'>Athens-Clarke County Voting Districts</h1>
        <p>Find your voting district for local and statewide elections. Enter your address into the box to the left </p><br>
        <p>This map shows precincts, commission districts, school board districts, congressional districts, and the state house districts.</p>

        <footer class='mt12 bg-gray-faint txt-s absolute w-full bottom px12'>
          <ul>
            <li>Explore the original <a class='link' href='http://athensclarkecounty.com/248/Current-District-Maps'>maps</a></li>
            <li>Map authored by <a class='link' href='#'>M. Duever</a></li>
            </p>
        </footer>
      </div>
    </div>
    <div class='col col--12 col--9-ml h180 h-full-ml'>
    <div id="map" class='viewport-twothirds viewport-full-ml'></div>


    <script src="http://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-geocoder-mapzen/1.9.4/leaflet-geocoder-mapzen.js"></script>
    <script async defer src='https://api.mapbox.com/mapbox-assembly/v0.17.0/assembly.js'></script>

    <script>

      var map = L.map('map', {
        center: [33.938718, -83.371200],
        zoom: 11.5,
    });

      var tiles = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
          attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ',
          maxZoom: 16,
          minZoom: 11
      }).addTo(map);
// add geocoder
      L.control.geocoder('mapzen-zeZY4Xt').addTo(map);


    $.when(
      $.getJSON('data/precincts.json'),
      $.getJSON('data/commission.json'),
      $.getJSON('data/congress.json'),
      $.getJSON('data/house.json'),
      $.getJSON('data/schoolboard.json')
    ).done(function(precincts, commission, congress, house, schoolboard){
        // can access data like this:
        console.log(precincts[0]);

        var congressLayer = L.geoJson(congress[0],{
          style: function(feature){
            return{
              color:"#ddddd",
              weight: 2,
              fillOpacity: .7,
              fillColor: "#33a02c"
            };
          }
        }).addTo(map);

        var houseLayer = L.geoJson(house[0],{
          style: function(feature){
            return{
              color:"#ddddd",
              weight: 2,
              fillOpacity: .7,
              fillColor: "#b2df8a"
            };
          }
        }).addTo(map);

        var schoolboardLayer = L.geoJson(schoolboard[0],{
          style: function(feature){
            return{
              color:"#ddddd",
              weight: 2,
              fillOpacity: .7,
              fillColor: "#cab2d6"
            };
          }
        }).addTo(map);

        var commissionLayer = L.geoJson(commission[0],{
          style: function(feature){
            return{
              color:"#ddddd",
              weight: 2,
              fillOpacity: .7,
              fillColor: "#fdbf6f"
            };
          }
        }).addTo(map);

        var precinctLayer = L.geoJson(precincts[0],{
          style: function(feature){
            return{
              color:"#ddddd",
              weight: 2,
              fillOpacity: .7,
              fillColor: "#a6cee3"
            };
          }
        }).addTo(map);


      var baseMaps = {
          "Precincts": precinctLayer,
          "Commission Districts": commissionLayer,
          "School Board Districts": schoolboardLayer,
          "State House Districts": houseLayer,
          "Congressional Districts": congressLayer
      };
      L.control.layers(baseMaps).addTo(map);

}); // end done loading data

</script>

</body>

</html>
